# This file is part of the Php DDD Standard project.
#
# Copyright (c) 2017 LIN3S <info@lin3s.com>
#
# For the full copyright and license information, please view the LICENSE
# file that was distributed with this source code.
#
# @author Beñat Espiña <benatespina@gmail.com>
# @author Gorka Laucirica <gorka.lauzirika@gmail.com>

imports:
    - { resource: ../../../../../../parameters.yml }
    - { resource: security.yml }
    - { resource: doctrine.yml }
    - { resource: services/, type: directory }

parameters:
    locale: en

framework:
    translator: { fallbacks: ["%locale%"] }
    secret: "%secret%"
    router:
        resource: "%kernel.root_dir%/config/routing.yml"
        strict_requirements: ~
    form: ~
    csrf_protection: ~
    validation: { enable_annotations: true }
    templating:
        engines: ["twig"]
    default_locale: "%locale%"
    trusted_hosts: ~
    trusted_proxies: ~
    session:
        handler_id: session.handler.native_file
        save_path: "%kernel.root_dir%/../../../../../var/sessions/%kernel.environment%"
    fragments: ~
    http_method_override: true
    assets: ~

twig:
    debug: "%kernel.debug%"
    strict_variables: "%kernel.debug%"
    paths:
        "%kernel.root_dir%/../../Ui/Templates/Twig": ~

swiftmailer:
    transport: "%mailer_transport%"
    host: "%mailer_host%"
    username: "%mailer_user%"
    password: "%mailer_password%"
    spool: { type: memory }

accelerator_cache:
    host: "%router.request_context.scheme%://%router.request_context.host%"
    web_dir: "%kernel.root_dir%/../../Ui/Http/Symfony"

lin3s_distribution:
    webpack:
        manifest_path: "%kernel.root_dir%/../../Ui/manifest.json"
        public_js_path: "/build/"
        public_css_path: "/build"
ben_gor_user:
    user_class:
        user:
            class: App\Domain\Model\User\User
            data_transformer: App\Application\DataTransformer\User\UserDTODataTransform
            firewall: user
            default_roles:
                - ROLE_CLIENT
            routes:
                security:
                    login:
                        path: /login/
                    login_check:
                        path: /login-check/
                    logout:
                        path: /logout/
                    success_redirection_route:
                        route: /
                    jwt:
                        path: /api/client/token
                change_password:
                    path: /cambiar-contrasena/
                    success_redirection_route: app_home
                request_remember_password:
                    path: /recordar-contrasena/
                    success_redirection_route: ~

knpu_oauth2_client:
    clients:
        facebook:
            type: facebook
            client_id: "%oauth_facebook_client_id%"
            client_secret: "%oauth_facebook_client_secret%"
            graph_api_version: v2.9
            redirect_route: oauth_facebook_check
